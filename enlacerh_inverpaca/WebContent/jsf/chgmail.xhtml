<?xml version='1.0' encoding='UTF-8' ?>
<!-- 
     Copyright (C) 2011  ANDRES DOMINGUEZ

    Este programa es software libre: usted puede redistribuirlo y/o modificarlo 
    bajo los tÃ©rminos de la Licencia PÃºblica General GNU publicada 
    por la FundaciÃ³n para el Software Libre, ya sea la versiÃ³n 3 
    de la Licencia, o (a su elecciÃ³n) cualquier versiÃ³n posterior.

    Este programa se distribuye con la esperanza de que sea Ãºtil, pero 
    SIN GARANTÃ�A ALGUNA; ni siquiera la garantÃ­a implÃ­cita 
    MERCANTIL o de APTITUD PARA UN PROPÃ“SITO DETERMINADO. 
    Consulte los detalles de la Licencia PÃºblica General GNU para obtener 
    una informaciÃ³n mÃ¡s detallada. 

    DeberÃ­a haber recibido una copia de la Licencia PÃºblica General GNU 
    junto a este programa. 
    En caso contrario, consulte <http://www.gnu.org/licenses/>.
 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<ui:include src="common/cabeceras.xhtml" />
<ui:include src="common/timeout.xhtml" />
<h:body>
<f:view>
 <!-- Top-->
	<ui:include src="common/top.xhtml" />
   <div id="wrapper">
	<!-- MenÃº-->
	<ui:include src="common/menu.xhtml" />
	

	 <div class="container-fluid" id="containerF">
	<h:form id="formChgmail"  >

	            <!-- Div para colocar botones -->
				<div id="botones">              
				<p:toolbar>  

                <f:facet name="left">  
                &nbsp;
                <h:outputLabel value="#{autos02.nombre1}&nbsp;#{autos02.apell1}" styleClass="tituloCia"/>
			    &nbsp;
			    <p:commandLink icon="ui-icon-newwin" styleClass="btn btn-success"  immediate="true" title="#{msg.autonomDatos}"
	            onclick="$('#myModal').modal('show')"  >
	            <i class="fa fa-street-view fa-2x"></i>
	            </p:commandLink> 
                </f:facet>   
                
                </p:toolbar>  
				
				</div><br/>

         	  <!-- Mensaje e imagen --> 		
			     <div id="encabezados">   
				  <p:growl globalOnly="true" id="growl" life="30000"/>
				  <ui:include src="common/loader1.xhtml"/>
				  </div> 
	
		 
		 	<!-- Panel -->
			 <div class="panel panel-default" style="margin-top: 20px; margin-bottom: 10px">
		         <p:panel id="panel"  header="#{msg.regchgmail}" >	     	         
		         <h:panelGrid  columns="1">	         
	             <p:inputText id="mail" placeholder="#{msg.regmail}" style="height: 45px;" styleClass="form-control" maxlength="150"   value="#{registro.mail}" required="true" requiredMessage="#{utils.getMessage('html43')}" validatorMessage="#{utils.getMessage('autos01IngMail1')}">
		        <f:validateRegex pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]" />
	            </p:inputText>
	            <p:message for="mail"/>
	             <p:inputText id="mailConf"  placeholder="#{msg.regmailConf}" style="height: 45px;" styleClass="form-control" maxlength="150" value="#{registro.confirmMail}" required="true" requiredMessage="#{utils.getMessage('html43')}" validatorMessage="#{utils.getMessage('autos01IngMail1')}">
		        <f:validateRegex pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]" />
	            </p:inputText>
	            <p:message for="mailConf"/>
	            <p:spacer height="20"/>
	            <h:outputText value="#{msg.mailEstado}"/>
	            <h:outputText styleClass="tituloCia" value="#{validaEstadoCuentaCorreo.estadomail}" />
		        </h:panelGrid>
	            </p:panel><br/>
	        </div>    

           <!-- Modal Indice ciclo 1-->
	<div class="modal fade modal-wide" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	  <div class="modal-dialog">
	    <div class="modal-content">

	      <div class="modal-body">
	      <div class="panel panel-info">
	      <div class="panel-heading">#{msg.autonomDatos}</div>
	       <div class="container-fluid">
	       <div class="panel-body">
	       <div class="row">
	        <div class="col-md-3"><img src="#{autos02.imagen()}" class="img-rounded" title="#{msg.autonomImg}"  alt="user" width="180" height="200" onclick="upload();" ondblclick="uploadC();"/></div>
	        <div class="col-md-3" style="font-weight: bold;">#{msg.autonomCia}</div>
	        <div class="col-md-6" >#{autos02.codcia}</div>
	        <div class="col-md-3" style="font-weight: bold;">#{msg.autonomNom}</div>
	        <div class="col-md-6" >#{autos02.ptipnom}</div>
	        <div class="col-md-3" style="font-weight: bold;">#{msg.autonomFictra}</div>
	        <div class="col-md-6" >#{autos02.pfictra}</div>
	        <div class="col-md-3" style="font-weight: bold;">#{msg.autonomApell}</div>
	        <div class="col-md-6" >#{autos02.apell1}</div>
	        <div class="col-md-3" style="font-weight: bold;">#{msg.autonomNbr}</div>
	        <div class="col-md-6" >#{autos02.nombre1}</div>
	        <div class="col-md-3" style="font-weight: bold;">#{msg.autonomIng}</div>
	        <div class="col-md-6" >#{autos02.fecing}</div>
	        <div class="col-md-3" style="font-weight: bold;">#{msg.autonomSueld}</div>
	        <div class="col-md-6" >#{autos02.sueld1}</div>
	        <div class="col-md-3" style="font-weight: bold;">#{msg.autonomCgo}</div>
	        <div class="col-md-6" >#{autos02.pcodcar}</div>
	        <div class="col-md-3" style="font-weight: bold;">#{msg.autonomLoc}</div>
	        <div class="col-md-6" >#{autos02.pcodloc}</div>
	        <div class="col-md-3" style="font-weight: bold;">#{msg.autonomSuc}</div>
	        <div class="col-md-6" >#{autos02.pcodsuc}</div>
	        <div class="col-md-3" style="font-weight: bold;">#{msg.autonomUni}</div>
	        <div class="col-md-6" >#{autos02.pcoduni}</div>
	        <div class="col-md-3" style="font-weight: bold;">#{msg.autonomDep}</div>
	        <div class="col-md-6" >#{autos02.pcoddep}</div>
	        </div>	<br/>
	        <div id="upload" style="display: none;margin-bottom: 10px">                
           <p:fileUpload fileUploadListener="#{fileUploadController.handleImageUpload}"
            mode="advanced"
            update="growl" 
            cancelLabel="#{msg.autos02Cancel}" 
            label="#{msg.autos02Sel}"
            uploadLabel="#{msg.autos02Up}">
            <f:attribute name="coduser" value="#{loginBean.logged}" />	
            </p:fileUpload>
            </div>    
		  </div>
		  </div>
	      </div>

	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-info" data-dismiss="modal">#{msg.aceC}</button>
	       </div>
	    </div>
	  </div>
	</div>               
				
				
            &#160;<p:commandButton value="#{msg.chgmailButton}" 
            action="#{registro.updateMail}" update="growl, panel" styleClass="botonUn"/>&#160;&#160;
            <p:commandButton value="#{msg.chgmailButtonL}" immediate="true" update="panel, growl" process="@this" styleClass="botonUn" >  
                 <p:resetInput target="panel" />  
            </p:commandButton>     

            <!-- /#page-content-wrapper -->
 </h:form>
    </div>
    </div>
    <!-- /#wrapper -->
   </f:view>
</h:body>
</html>

